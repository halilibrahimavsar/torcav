{
  "meta": {
    "project": "TorcaV Wi-Fi Analyzer",
    "date": "2026-02-15",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "TorcaV is a professional Wi‑Fi analyzer mobile app (Flutter) that performs real‑time scanning, security analysis, network discovery (nmap), monitoring, and exportable reporting with background alerting and a modern dashboard.",
  "core_goals": [
    "Provide accurate multi‑pass Wi‑Fi scanning with signal averaging and automatic backend fallback (iw / nmcli).",
    "Deliver actionable security assessments (WEP/WPA/WPA2/WPA3 detection, rogue AP/evil twin detection, deauth alerts).",
    "Integrate network discovery (nmap) and provide port/OS/service insights and vulnerability scoring.",
    "Offer real‑time monitoring (throughput, signal heatmaps, channel congestion) and alerting (push/webhook/email).",
    "Enable data export (PDF/JSON/HTML), historical storage, session comparison, and background monitoring with push notifications.",
    "Ship a responsive, dark‑theme Flutter UI with a Dashboard and clean architecture (BLoC) for Android/iOS."
  ],
  "features": [
    {
      "name": "Core Wi‑Fi Scanning",
      "description": "Perform multi‑pass Wi‑Fi scans with signal averaging, automatic interface detection, dual backend support (iw/nmcli), band/channel analysis, hidden SSID discovery, and BSSID/vendor identification.",
      "user_flows": [
        "POST /api/scan/start with {interface: \"auto\", backend_preference: [\"iw\",\"nmcli\"], passes: 3} -> Receive 202 with {scan_id} -> GET /api/scan/status?scan_id={scan_id} -> Receive 200 with {progress, partial_results} -> GET /api/networks?scan_id={scan_id}&aggregate=avg_signal -> Receive 200 with list of networks including ssid,bssid,channel,band,avg_dbm",
        "POST /api/scan/start with {interface: \"wlan0\", backend_preference: [\"iw\"]} -> Receive 500 backend_error for iw -> POST /api/scan/start with {interface: \"wlan0\", backend: \"nmcli\"} -> Receive 202 with {scan_id} -> GET /api/networks?scan_id={scan_id} -> Receive 200 with networks",
        "POST /api/scan/probe with {scan_id:{scan_id},attempt_hidden_discovery:true} -> Receive 200 with {hidden_ssids:[...]} -> GET /api/network/vendors?bssids=[bssid1,bssid2] -> Receive 200 with {bssid_vendor_map}",
        "POST /api/scan/start with {interface: \"invalid0\"} -> Receive 400 with {error: \"interface_not_found\"} -> GET /api/interfaces -> Receive 200 with list of available interfaces"
      ]
    },
    {
      "name": "Security Assessment",
      "description": "Analyze networks for encryption types, rogue APs/evil twins, deauthentication attacks, captive portals and produce per‑network security scores and risk details.",
      "user_flows": [
        "POST /api/analysis/security with {scan_id:{scan_id}} -> Receive 200 with {security_report_id, summary: {open:wpa2:wpa3:counts}} -> GET /api/analysis/security/report?security_report_id={security_report_id} -> Receive 200 with detailed findings including rogue_ap_flags,deauth_events,wpa_handshake_captures",
        "POST /api/analysis/rogue-detect with {scan_id:{scan_id},threshold:0.75} -> Receive 202 with {job_id} -> GET /api/analysis/rogue-detect/status?job_id={job_id} -> Receive 200 with {result: [suspected_evil_twins]}",
        "POST /api/analysis/security with {scan_id:null} -> Receive 400 with {error: \"missing_scan_id\"} -> POST /api/scan/start with {interface: \"auto\"} -> Receive 202 with {scan_id}",
        "POST /api/analysis/captive-portal-check with {network_bssid:{bssid}} -> Receive 200 with {captive:true, redirect_url:\"http://...\"} -> POST /api/analysis/captive-portal-check with {network_bssid:\"bad_bssid\"} -> Receive 404 with {error: \"network_not_found\"}"
      ]
    },
    {
      "name": "Network Scanning (Nmap Integration)",
      "description": "Perform LAN host discovery, deep scans with multiple profiles (fast/balanced/aggressive), OS fingerprinting, and vulnerability scanning via NSE scripts.",
      "user_flows": [
        "POST /api/nmap/scan with {target:\"192.168.1.0/24\",profile:\"balanced\"} -> Receive 202 with {nmap_job_id} -> GET /api/nmap/result?nmap_job_id={nmap_job_id} -> Receive 200 with {hosts:[{ip,os,open_ports,services}]}",
        "POST /api/nmap/scan with {target:\"192.168.1.45\",profile:\"aggressive\",nse_scripts:[\"vuln\"]} -> Receive 202 with {nmap_job_id} -> GET /api/nmap/result?nmap_job_id={nmap_job_id} -> Receive 200 with host vulnerability details and risk_score",
        "POST /api/nmap/scan with {target:\"invalid_target\"} -> Receive 422 with {error: \"invalid_target_format\"} -> POST /api/nmap/scan with {target:\"192.168.1.0/24\",profile:\"fast\"} -> Receive 202 with {nmap_job_id}"
      ]
    },
    {
      "name": "Monitoring & Analysis",
      "description": "Real‑time bandwidth (TX/RX), signal heatmaps and historical trend analysis, topology mapping, DFS radar detection and device fingerprinting over time.",
      "user_flows": [
        "POST /api/monitor/start with {metrics:[\"tx\",\"rx\",\"rssi\"],interval_sec:2} -> Receive 202 with {monitor_id} -> GET /api/monitor/metrics?monitor_id={monitor_id}&since=10s -> Receive 200 with time_series metrics",
        "GET /api/heatmap/data?range=24h&band=2.4 -> Receive 200 with [{lat,lng,dbm,timestamp}] -> GET /api/topology?since=7d -> Receive 200 with nodes_and_links",
        "POST /api/monitor/start with {metrics:[\"tx\"],rate_limit: \"exceeded\"} -> Receive 429 with {error: \"rate_limit_exceeded\"} -> GET /api/monitor/limits -> Receive 200 with configured_limits"
      ]
    },
    {
      "name": "Alerting & Notifications (Background Monitoring)",
      "description": "Real‑time alerts for security/anomaly events via push, email, Telegram and webhooks; IDS/IPS continuous monitoring with customizable thresholds and rate limiting.",
      "user_flows": [
        "POST /api/alerts/register with {type:\"push\",device_token:\"<fcm_token>\"} -> Receive 201 with {subscription_id} -> POST /api/alerts/trigger with {subscription_id,alert:{type:\"rogue_ap\",bssid:\"...\"}} -> Receive 200 with {delivered:true}",
        "POST /api/alerts/register with {type:\"webhook\",url:\"https://example.com/hook\"} -> Receive 201 with {subscription_id} -> POST /api/alerts/test with {subscription_id} -> Receive 200 with {status: \"ok\"}",
        "POST /api/alerts/register with {type:\"invalid\",details:{}} -> Receive 400 with {error: \"unsupported_alert_type\"} -> GET /api/alerts/subscriptions -> Receive 200 with list_of_subscriptions",
        "POST /api/monitor/background-enable with {subscription_id,thresholds:{deauth_rate:5/min}} -> Receive 200 with {background_job_id} -> POST /api/alerts/trigger for detected_event -> Receive 200 with {delivered:true}"
      ]
    },
    {
      "name": "Data Management & Report Export",
      "description": "Generate PDF/JSON/HTML reports, save sessions, import/export scan results, and support local database storage (Hive/SQLite) and cloud sync.",
      "user_flows": [
        "POST /api/report/generate with {scan_id:{scan_id},format:\"pdf\",include_history:true} -> Receive 202 with {report_id} -> GET /api/report/status?report_id={report_id} -> Receive 200 with {ready:true} -> GET /api/report/download?report_id={report_id} -> Receive 200 with binary/pdf",
        "POST /api/session/save with {scan_id:{scan_id},name:\"evening_scan\"} -> Receive 201 with {session_id} -> GET /api/session/list -> Receive 200 with sessions_list",
        "GET /api/report/download?report_id=nonexistent -> Receive 404 with {error: \"report_not_found\"} -> POST /api/report/generate with {scan_id:{scan_id},format:\"json\"} -> Receive 202 with {report_id}"
      ]
    },
    {
      "name": "Dashboard (UI Overview)",
      "description": "Main dashboard displaying overview metrics: active scans, top networks, recent security alerts, throughput charts, channel congestion and quick actions (scan, report, nmap).",
      "user_flows": [
        "GET /api/dashboard with auth_token -> Receive 200 with {overview:{active_scans,top_networks,recent_alerts,throughput_summary}} -> GET /api/networks/top?limit=5 -> Receive 200 with top networks details",
        "GET /api/dashboard with invalid_or_missing_token -> Receive 401 with {error: \"unauthorized\"} -> POST /api/auth/login with valid_credentials -> Receive 200 with {jwt_token} -> GET /api/dashboard with jwt_token -> Receive 200 with overview"
      ]
    },
    {
      "name": "Channel Recommendation & Congestion Analysis",
      "description": "Analyze channel occupancy across 2.4/5/6 GHz bands and recommend optimal channels with congestion scoring.",
      "user_flows": [
        "GET /api/channel/analysis?scan_id={scan_id}&band=2.4 -> Receive 200 with {channels:[{channel,occupancy_score,interference}] , recommended: [channel_1]}",
        "POST /api/channel/recommendation with {scan_id:{scan_id},device_bssid:{bssid}} -> Receive 200 with {recommended_channel,expected_improvement_dbm} -> POST /api/channel/recommendation with {scan_id:null} -> Receive 400 with {error: \"missing_scan_id\"}"
      ]
    },
    {
      "name": "Speed Test Integration",
      "description": "Run integrated speed tests and show historical throughput and latency results tied to scan sessions.",
      "user_flows": [
        "POST /api/speedtest/run with {server_id:\"auto\"} -> Receive 202 with {speedtest_job_id} -> GET /api/speedtest/result?speedtest_job_id={speedtest_job_id} -> Receive 200 with {download_mbps,upload_mbps,latency_ms}",
        "POST /api/speedtest/run with {server_id:\"invalid\"} -> Receive 422 with {error: \"server_not_found\"} -> POST /api/speedtest/run with {server_id:\"auto\"} -> Receive 202 with {speedtest_job_id}"
      ]
    }
  ],
  "code_summary": {
    "version": "2",
    "type": "frontend",
    "tech_stack": [
      {
        "language": "Dart"
      },
      {
        "framework": "Flutter"
      }
    ],
    "features": [
      {
        "name": "Dashboard",
        "description": "Main dashboard showing overview",
        "files": [
          "lib/features/dashboard/presentation/pages/dashboard_page.dart"
        ],
        "endpoints": [],
        "depends_on": []
      }
    ],
    "known_limitations": []
  }
}
